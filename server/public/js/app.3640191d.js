(function(t){function e(e){for(var n,i,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)i=r[d],s[i]&&m.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},o=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0e27":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("servicios caja")])},s=[],o={},i=o,r=a("2877"),l=Object(r["a"])(i,n,s,!1,null,"72f95ab8",null);e["default"]=l.exports},"1c2d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("toolbar"),a("v-content",[a("router-view")],1)],1)},s=[],o={},i=o,r=a("2877"),l=a("6544"),c=a.n(l),u=a("a75b"),d=Object(r["a"])(i,n,s,!1,null,"4a1e8974",null);e["default"]=d.exports;c()(d,{VContent:u["a"]})},"3a10":function(t,e,a){},4601:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"keep"}},[a("toolbar"),a("drawer"),t.isDataReady?a("v-content",[a("v-fade-transition",{attrs:{mode:"out-in"}},[a("router-view")],1)],1):t._e(),a("v-overlay",{attrs:{value:t.overlay}},[a("v-progress-circular",{attrs:{size:70,width:3,color:"primary",indeterminate:""}}),a("p",{staticClass:"ml-n3"},[t._v(t._s(t.overlayText))])],1)],1)},s=[],o=a("bc3a"),i=a.n(o),r={props:{source:String},data:function(){return{drawer:null,items:[{icon:"lightbulb_outline",text:"Intenciones",to:"intent"}],isDataReady:!1,local:null}},mounted:function(){this.getInitialData(),this.$store.dispatch("initialLoad")},methods:{getInitialData:function(){var t=this;this.$store.dispatch("showOverlay",{active:!0,text:"Cargando datos"}),i.a.get("/api/chatbot/agent/intents").then(function(e){e.data.ok?(t.$store.dispatch("setIntents",e.data.payload),t.isDataReady=!0):console.error(e.data)}).catch(function(e){if("ECONNABORTED"!==e.code)throw console.log(e),e;console.log("se excedio el tiempo limite"),t.$store.dispatch("showSnackbar",{text:"Algo salió mal",color:"error"})}).finally(function(){t.$store.dispatch("showOverlay",{active:!1,text:"Cargando datos"})})}},computed:{overlay:function(){return this.$store.state.overlay.active},overlayText:function(){return this.$store.state.overlay.text}}},l=r,c=(a("99f1"),a("2877")),u=a("6544"),d=a.n(u),m=a("7496"),p=a("a75b"),v=a("0789"),f=a("a797"),h=a("490a"),b=Object(c["a"])(l,n,s,!1,null,null,null);e["default"]=b.exports;d()(b,{VApp:m["a"],VContent:p["a"],VFadeTransition:v["c"],VOverlay:f["a"],VProgressCircular:h["a"]})},"4b34":function(t,e,a){"use strict";var n=a("bf76"),s=a.n(n);s.a},"4ba3":function(t,e,a){},"559a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{attrs:{align:"center"}},[a("h1",[t._v("Menú persistente")]),a("v-btn",{staticClass:"ml-5",attrs:{color:"primary"},on:{click:t.addOption}},[t._v("Añadir Opción")])],1),t._l(t.options,function(e,n){return a("v-card",{key:n,staticClass:"mb-5 pa-5",attrs:{outlined:""}},[a("v-row",{attrs:{justify:"space-between"}},[a("strong",{staticClass:"title"},[t._v("Configuración del botón "+t._s(n+1))]),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.deleteOption(n)}}},[t._v("Eliminar")])],1),a("v-row",[a("v-col",[a("p",{staticClass:"subtitle-1"},[t._v("Tipo:")]),a("v-radio-group",{staticClass:"ma-0 ml-5",attrs:{row:""},on:{change:function(a){return t.changeButtonType(t.options,n,e.type)}},model:{value:e.type,callback:function(a){t.$set(e,"type",a)},expression:"option.type"}},[a("v-radio",{attrs:{color:"primary",label:"POSTBACK",value:"postback"}}),a("v-radio",{attrs:{color:"primary",label:"ENLACE WEB",value:"web_url"}})],1)],1)],1),a("v-text-field",{attrs:{outlined:"",clearable:"",label:"Nombre del botón"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"option.title"}}),"postback"==e.type?a("v-text-field",{attrs:{outlined:"",clearable:"",label:"Mensaje de emparejamiento (para DialogFlow)"},model:{value:e.payload,callback:function(a){t.$set(e,"payload",a)},expression:"option.payload"}}):a("v-text-field",{attrs:{outlined:"",clearable:"",label:"Dirección URL"},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"option.url"}})],1)}),a("v-btn",{attrs:{color:"success"},on:{click:function(e){return t.setPersistantMenu(t.options)}}},[t._v("Guardar")])],2)},s=[],o={data:function(){return{options:[]}},mounted:function(){this.getInitialData()},methods:{setPersistantMenu:function(t){var e=this;this.$store.dispatch("showOverlay",{active:!0,text:"Actualizando"}),axios.post("/api/chatbot/agent/persistantmenu",{buttons:t}).then(function(t){t.data.ok&&(e.$store.dispatch("showOverlay",{active:!1,text:""}),e.$store.dispatch("showSnackbar",{text:t.data.message,color:"success"}))}).catch(function(t){console.error(t)}).finally(function(){e.$store.dispatch("showOverlay",{active:!1,text:"Actualizando"})})},getInitialData:function(){var t=this;axios.get("/api/chatbot/agent/persistantmenu/list").then(function(e){console.log(e),e.data.ok&&(t.options=e.data.payload)}).catch(function(t){console.error(t)})},changeButtonType:function(t,e,a){"postback"==a&&t.splice(e,1,{payload:"",type:"postback",title:t[e].title}),"web_url"==a&&t.splice(e,1,{type:"web_url",url:"",title:t[e].title})},addOption:function(){this.options.push({title:"Boton de ejemplo",type:"web_url",url:"https://developers.facebook.com"})},deleteOption:function(t){this.options.splice(t,1)}}},i=o,r=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),m=a("62ad"),p=a("a523"),v=a("67b6"),f=a("43a6"),h=a("0fd9"),b=a("8654"),g=Object(r["a"])(i,n,s,!1,null,"633e2308",null);e["default"]=g.exports;c()(g,{VBtn:u["a"],VCard:d["a"],VCol:m["a"],VContainer:p["a"],VRadio:v["a"],VRadioGroup:f["a"],VRow:h["a"],VTextField:b["a"]})},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),s=(a("5363"),a("f309"));n["a"].use(s["a"]);var o=new s["a"]({icons:{iconfont:"mdi"}}),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("v-app",[a("router-view"),a("snackbar")],1)],1)},r=[],l=a("2877"),c=a("6544"),u=a.n(c),d=a("7496"),m={},p=Object(l["a"])(m,i,r,!1,null,null,null),v=p.exports;u()(p,{VApp:d["a"]});var f=a("8c4f"),h=a("1858"),b=a.n(h);n["a"].use(f["a"]);var g=[{path:"/dashboard",component:a("4601").default,meta:{requiresAuth:!0},children:[{path:"",name:"dashboard",redirect:{name:"intent"}},{path:"intenciones",name:"intent",component:a("7761").default},{path:"intenciones/:id",name:"updateIntent",component:a("ca63").default},{path:"menu-persistente",name:"persistantMenu",component:a("559a").default},{path:"agencias",name:"agencies",component:a("fff1").default},{path:"usuarios-del-sistema",name:"auth_users",component:a("f5ea").default},{path:"usuarios-de-charly-bot",name:"chatbotUsers",component:a("84d0").default}]},{path:"/",component:a("1c2d").default,meta:{guest:!0},children:[{path:"",redirect:"/login"},{path:"/login",name:"login",component:a("bd01").default},{path:"registro",name:"register",component:a("6d75").default}]},{path:"/webview",component:a("0e27").default},{path:"*",component:a("ff18").default}],_=new f["a"]({routes:g,mode:"history"});_.beforeEach(function(t,e,a){if(t.matched.some(function(t){return t.meta.requiresAuth}))if(null==b.a.getItem("token"))a({name:"login",params:{nextUrl:t.fullPath}});else{var n=JSON.parse(b.a.getItem("user"));t.matched.some(function(t){return t.meta.requiresAuth})?1==n.role||2==n.role?a():a({name:"dashboard"}):a()}else t.matched.some(function(t){return t.meta.guest})?null==b.a.getItem("token")?a():a({name:"dashboard"}):a()});var y=_,x=a("2f62"),k=a("bc3a"),w=a.n(k);n["a"].prototype.$axios=w.a,n["a"].use(x["a"]);var I=new x["a"].Store({state:{status:"",token:b.a.getItem("token")||"",user:JSON.parse(b.a.getItem("user"))||{},intents:[],loggingIn:!1,loginError:null,loginSuccessful:!1,snackbar:{text:"",active:!1,color:"success"},toolbar:{drawerIcon:null},overlay:{active:!1,text:""}},mutations:{auth_request:function(t){t.status="loading"},setIntents:function(t,e){t.intents=e},logout:function(t){t.status="",t.token="",t.loggingIn=!1},auth_success:function(t,e){var a=e.token,n=e.user;t.status="success",t.token=a,t.user=n,t.loggingIn=!0},auth_error:function(t){t.status="error"},showSnackbar:function(t,e){var a=e.text,n=e.color;t.snackbar.text=a,t.snackbar.color=n,t.snackbar.active=!0},initialLoad:function(t){t.loggingIn=!0,t.loggingIn=!0},showOverlay:function(t,e){var a=e.active,n=e.text;t.overlay.active=a,t.overlay.text=n}},actions:{showSnackbar:function(t,e){var a=t.commit,n=e.text,s=e.color;a("showSnackbar",{text:n,color:s})},showOverlay:function(t,e){var a=t.commit,n=e.active,s=e.text;a("showOverlay",{active:n,text:s})},register:function(t,e){var a=t.commit;return new Promise(function(t,n){a("auth_request"),w.a.post("/api/register",{first_name:e.first_name,last_name:e.last_name,email:e.email,password:e.password}).then(function(e){e.data.ok?t(e.data.message):n(e.data)}).catch(function(t){n(t)})})},login:function(t,e){var a=t.commit;return new Promise(function(t,n){a("auth_request"),w.a.post("/api/login",{email:e.email,password:e.password}).then(function(e){if(e.data.ok){console.log(e.data);var n=e.data.token,s=e.data.payload;b.a.clear(),b.a.setItem("token",n),b.a.setItem("user",JSON.stringify(s)),w.a.defaults.headers.common["Authorization"]=n,a("auth_success",{token:n,user:s}),t(e.data.message)}}).catch(function(t){a("auth_error"),b.a.removeItem("token"),b.a.removeItem("user"),t.response&&(console.error(t.response.data),n(t))})})},setIntents:function(t,e){var a=t.commit;a("setIntents",e)},logout:function(t){var e=t.commit;e("logout"),b.a.removeItem("token")},initialLoad:function(t){var e=t.commit;e("initialLoad")}},getters:{isLoggedIn:function(t){return!!t.token},authStatus:function(t){return t.status}}}),V=(a("3a10"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[t._v("\n    Tiempo transcurrido:\n    "+t._s(t.hours)+" :\n    "+t._s(t._f("zeroPad")(t.minutes))+" :\n    "+t._s(t._f("zeroPad")(t.seconds))+" :\n    "+t._s(t._f("zeroPad")(t.milliSeconds,3))+"\n  ")]),t.isRunning?t._e():a("v-btn",{attrs:{outline:"",color:"primary",dark:""},on:{click:t.startTimer}},[t._v("EMPEZAR")]),t.isRunning?a("v-btn",{attrs:{outline:"",color:"success",dark:"",disabled:!t.isRunning},on:{click:t.pushTime}},[t._v("VUELTA")]):t._e(),t.isRunning?a("v-btn",{attrs:{outline:"",color:"error",dark:"",disabled:!t.isRunning},on:{click:t.stopTimer}},[t._v("DETENER")]):t._e(),t.isRunning?a("v-btn",{attrs:{outline:"",color:"black",dark:""},on:{click:t.clearAll}},[t._v("BORRAR")]):t._e(),a("ul",t._l(t.laps,function(e){return a("li",[t._v("\n      "+t._s(e.hours)+" :\n      "+t._s(t._f("zeroPad")(e.minutes))+" :\n      "+t._s(t._f("zeroPad")(e.seconds))+" :\n      "+t._s(t._f("zeroPad")(e.milliSeconds,3))+"\n    ")])}),0)],1)}),C=[],T=(a("6b54"),a("f576"),{mounted:function(){console.log("esto hay en laps: ",this.laps)},props:["laps"],data:function(){return{times:[],animateFrame:0,nowTime:0,diffTime:0,startTime:0,isRunning:!1}},methods:{setSubtractStartTime:function(t){t="undefined"!==typeof t?t:0;this.startTime=Math.floor(performance.now()-t)},startTimer:function(){var t=this;t.setSubtractStartTime(t.diffTime),function e(){t.nowTime=Math.floor(performance.now()),t.diffTime=t.nowTime-t.startTime,t.animateFrame=requestAnimationFrame(e)}(),t.isRunning=!0},stopTimer:function(){this.$emit("stop",this.times),this.isRunning=!1,cancelAnimationFrame(this.animateFrame)},pushTime:function(){this.times.push({hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliSeconds:this.milliSeconds})},clearAll:function(){this.startTime=0,this.nowTime=0,this.diffTime=0,this.times=[],this.stopTimer(),this.animateFrame=0}},computed:{hours:function(){return Math.floor(this.diffTime/1e3/60/60)},minutes:function(){return Math.floor(this.diffTime/1e3/60)%60},seconds:function(){return Math.floor(this.diffTime/1e3)%60},milliSeconds:function(){return Math.floor(this.diffTime%1e3)}},filters:{zeroPad:function(t,e){e="undefined"!==typeof e?e:2;return t.toString().padStart(e,"0")}}}),S=T,$=a("8336"),R=Object(l["a"])(S,V,C,!1,null,"3d3d6e8e",null),A=R.exports;u()(R,{VBtn:$["a"]});var O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("rich message")])},j=[],P={},E=P,M=Object(l["a"])(E,O,j,!1,null,"390c57dd",null),N=M.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{attrs:{dark:"",app:"","clipped-left":"",color:"#1867C0"}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),a("span",{staticClass:"title ml-3 mr-5"},[t._v("Charly Bot")]),a("v-spacer"),t.$store.state.token?t._e():a("v-btn",{attrs:{dark:"",outlined:"",to:{name:"login"}}},[t._v("Iniciar Sesión")]),t.$store.state.token?a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({attrs:{text:"",color:"white",dark:""}},n),[t._v("\n        "+t._s(t.user)+"\n        "),a("v-icon",[t._v("mdi-menu-down")])],1)]}}],null,!1,288738371)},[a("v-list",[a("v-list-item",{on:{click:t.logout}},[a("v-list-item-title",[t._v("Cerrar sesión")])],1)],1)],1):t._e()],1)},D=[],F={computed:{drawer:{get:function(){return this.$store.state.toolbar.drawerIcon},set:function(t){this.$store.state.toolbar.drawerIcon=t}},user:function(){return this.$store.state.user.first_name}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push({name:"login"})}}},q=F,L=a("40dc"),U=a("5bc1"),G=a("132d"),J=a("8860"),z=a("da13"),Q=a("5d23"),W=a("e449"),X=a("2fa4"),H=Object(l["a"])(q,B,D,!1,null,"05427836",null),K=H.exports;u()(H,{VAppBar:L["a"],VAppBarNavIcon:U["a"],VBtn:$["a"],VIcon:G["a"],VList:J["a"],VListItem:z["a"],VListItemTitle:Q["b"],VMenu:W["a"],VSpacer:X["a"]});var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{color:t.snackbarColor,timeout:3e3},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("\n  "+t._s(t.snackbarText)+"\n  "),a("v-btn",{attrs:{text:""},on:{click:function(e){t.snackbar=!1}}},[t._v("Close")])],1)},Z=[],tt={computed:{snackbar:{get:function(){return this.$store.state.snackbar.active},set:function(t){this.$store.state.snackbar.active=t}},snackbarText:function(){return this.$store.state.snackbar.text},snackbarColor:function(){return this.$store.state.snackbar.color}}},et=tt,at=a("2db4"),nt=Object(l["a"])(et,Y,Z,!1,null,"2138636a",null),st=nt.exports;u()(nt,{VBtn:$["a"],VSnackbar:at["a"]});var ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-navigation-drawer",{attrs:{app:"",clipped:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[t._l(t.items,function(e,n){return[a("v-list-item",{key:n,attrs:{to:e.to},on:{click:function(t){}}},[a("v-list-item-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.text))])],1)],1)]})],2)],1)},it=[],rt={data:function(){return{items:[{icon:"lightbulb_outline",text:"Agencias",to:{name:"agencies"}},{icon:"lightbulb_outline",text:"Menú Persistente",to:{name:"persistantMenu"}},{icon:"lightbulb_outline",text:"Intenciones",to:{name:"intent"}},{icon:"mdi-account-edit",text:"Usuarios del sistema",to:{name:"auth_users"}},{icon:"mdi-account-edit",text:"Usuarios de CharlyBot",to:{name:"chatbotUsers"}}]}},computed:{drawer:{get:function(){return this.$store.state.toolbar.drawerIcon},set:function(t){this.$store.state.toolbar.drawerIcon=t}}}},lt=rt,ct=a("1800"),ut=a("f774"),dt=Object(l["a"])(lt,ot,it,!1,null,"9f69dfcc",null),mt=dt.exports;u()(dt,{VIcon:G["a"],VList:J["a"],VListItem:z["a"],VListItemAction:ct["a"],VListItemContent:Q["a"],VListItemTitle:Q["b"],VNavigationDrawer:ut["a"]}),n["a"].component("chronometer",A),n["a"].component("richMessage",N),n["a"].component("toolbar",K),n["a"].component("snackbar",st),n["a"].component("drawer",mt),window.axios=w.a,window.axios.defaults.timeout=1e4,window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",window.axios.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("auth_token");var pt={formattedDate:function(t){var e=new Date(t);return e.toLocaleString()}},vt={install:function(t){t.helpers=pt,t.prototype.$helpers=pt}};n["a"].use(vt);a("d5e8"),a("d1e7");n["a"].config.productionTip=!1,new n["a"]({vuetify:o,router:y,store:I,render:function(t){return t(v)}}).$mount("#app")},"6d75":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Inicio de Sesión")]),a("div",{staticClass:"flex-grow-1"})],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{name:"nombres",label:"nombres"},model:{value:t.user.first_name,callback:function(e){t.$set(t.user,"first_name",e)},expression:"user.first_name"}}),a("v-text-field",{attrs:{name:"Apellidos",label:"Apellidos"},model:{value:t.user.last_name,callback:function(e){t.$set(t.user,"last_name",e)},expression:"user.last_name"}}),a("v-text-field",{attrs:{label:"email",name:"email","prepend-icon":"person",type:"text"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"lock",type:"password"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.register(t.user)}}},[t._v("Registrar")])],1)],1)],1)],1)},s=[],o={data:function(){return{user:{first_name:"",last_name:"",email:"",password:""}}},methods:{register:function(t){var e=this;this.$store.dispatch("register",t).then(function(t){e.$store.dispatch("showSnackbar",{text:t,color:"success"}),e.$router.push({name:"dashboard"})}).catch(function(t){console.log(t)})}}},i=o,r=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),m=a("99d9"),p=a("62ad"),v=a("4bd4"),f=a("0fd9"),h=a("8654"),b=a("71d9"),g=a("2a7f"),_=Object(r["a"])(i,n,s,!1,null,"7087b378",null);e["default"]=_.exports;c()(_,{VBtn:u["a"],VCard:d["a"],VCardActions:m["a"],VCardText:m["b"],VCol:p["a"],VForm:v["a"],VRow:f["a"],VTextField:h["a"],VToolbar:b["a"],VToolbarTitle:g["a"]})},7761:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",[t._v("Listado de intenciones de Charly Bot")]),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"11"}},[a("v-text-field",{attrs:{label:"Buscar intención"},model:{value:t.intentToFind,callback:function(e){t.intentToFind=e},expression:"intentToFind"}})],1)],1),a("div",{staticClass:"px-10"},[a("v-simple-table",[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Nro")]),a("th",{staticClass:"text-left"},[t._v("Intención")])])]),a("tbody",t._l(t.filteredIntents,function(e,n){return a("tr",{key:n},[a("td",{staticClass:"text-left body-1"},[t._v(t._s(n+1))]),a("td",{staticClass:"text-left body-1"},[a("router-link",{attrs:{to:{name:"updateIntent",params:{id:t.extractIntentId(e.name)}}}},[t._v(t._s(e.displayName))])],1)])}),0)])],1)],1)},s=[];a("6762"),a("2fdb"),a("55dd");function o(t){var e=t.substring(t.lastIndexOf("/")+1,t.length);return e}var i={data:function(){return{intentToFind:""}},computed:{intents:function(){return this.$store.state.intents.sort(function(t,e){var a=t.displayName.toUpperCase(),n=e.displayName.toUpperCase();return a<n?-1:a>n?1:0})},filteredIntents:function(){var t=this;return this.intents.filter(function(e){return e.displayName.toLowerCase().includes(t.intentToFind.toLowerCase())})}},methods:{extractIntentId:function(t){return o(t)}}},r=i,l=a("2877"),c=a("6544"),u=a.n(c),d=a("62ad"),m=a("a523"),p=a("0fd9"),v=a("1f4f"),f=a("8654"),h=Object(l["a"])(r,n,s,!1,null,"f7a77d8e",null);e["default"]=h.exports;u()(h,{VCol:d["a"],VContainer:m["a"],VRow:p["a"],VSimpleTable:v["a"],VTextField:f["a"]})},"84d0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",[t._v("Usuarios de Charly Bot")]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.users,"items-per-page":10,loading:0==t.users.length,"loading-text":"Cargando usuarios del chatbot"},scopedSlots:t._u([{key:"item.document_num",fn:function(e){var n=e.item;return[n.document_num?a("p",[t._v(t._s(n.document_num))]):a("v-chip",{attrs:{color:"error"}},[t._v("Falta")])]}},{key:"item.hoja_informativa",fn:function(e){var n=e.item;return[n.hoja_informativa?t._e():a("p",[t._v("Por definir")])]}}])})],1)},s=[],o={data:function(){return{headers:[{text:"Nombres",align:"left",value:"first_name"},{text:"Apellidos",value:"last_name"},{text:"ID de Facebook",value:"fb_id"},{text:"Fecha de Registro",value:"date"},{text:"DNI",value:"document_num"}],users:[]}},beforeMount:function(){this.getInitialData()},methods:{getInitialData:function(){var t=this;axios.get("/api/chatbot/users/list").then(function(e){e.data.ok&&(console.log(e.data.payload),t.users=e.data.payload)}).catch(function(t){console.error(t)})}}},i=o,r=a("2877"),l=a("6544"),c=a.n(l),u=a("cc20"),d=a("a523"),m=a("8fea"),p=Object(r["a"])(i,n,s,!1,null,"055ef3b0",null);e["default"]=p.exports;c()(p,{VChip:u["a"],VContainer:d["a"],VDataTable:m["a"]})},"927d":function(t,e,a){},"99f1":function(t,e,a){"use strict";var n=a("927d"),s=a.n(n);s.a},"9d20":function(t,e,a){"use strict";var n=a("4ba3"),s=a.n(n);s.a},bd01:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[a("v-toolbar-title",[t._v("Inicio de Sesión")]),a("div",{staticClass:"flex-grow-1"})],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"email","prepend-icon":"person",type:"text"},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}}),a("v-text-field",{attrs:{label:"Password","prepend-icon":"lock",type:"password"},model:{value:t.user.password,callback:function(e){t.$set(t.user,"password",e)},expression:"user.password"}})],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.login(t.user)}}},[t._v("Ingresar")])],1)],1)],1)],1)},s=[],o={data:function(){return{user:{email:"",password:""}}},methods:{login:function(t){var e=this;this.$store.dispatch("login",t).then(function(t){e.$store.dispatch("showSnackbar",{text:t,color:"success"}),e.$router.push({name:"dashboard"})}).catch(function(t){e.$store.dispatch("showSnackbar",{text:"Usuario o contraseña incorrectos",color:"error"})})}}},i=o,r=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),m=a("99d9"),p=a("62ad"),v=a("4bd4"),f=a("0fd9"),h=a("8654"),b=a("71d9"),g=a("2a7f"),_=Object(r["a"])(i,n,s,!1,null,"54f0d192",null);e["default"]=_.exports;c()(_,{VBtn:u["a"],VCard:d["a"],VCardActions:m["a"],VCardText:m["b"],VCol:p["a"],VForm:v["a"],VRow:f["a"],VTextField:h["a"],VToolbar:b["a"],VToolbarTitle:g["a"]})},bf76:function(t,e,a){},ca63:function(t,e,a){"use strict";a.r(e);var n,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.intent?a("v-container",[a("h1",[t._v("Nombre de la intención: "+t._s(t.intent.displayName))]),a("v-container",{staticClass:"pa-8"},[a("v-text-field",{attrs:{label:"Nombre de la intención"},model:{value:t.intent.displayName,callback:function(e){t.$set(t.intent,"displayName",e)},expression:"intent.displayName"}}),a("div",{staticClass:"title"},[t._v("Frases de entrenamiento")]),a("v-text-field",{attrs:{label:"Añade una frase de entrenamiento","prepend-inner-icon":"mdi-format-quote-close"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTrainingPhrase(t.newTrainingPhrase)}},model:{value:t.newTrainingPhrase,callback:function(e){t.newTrainingPhrase=e},expression:"newTrainingPhrase"}}),t._l(t.trainingPhrases,function(e,n){return a("v-row",{key:n,attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",sm:"1"}},[a("p",{staticClass:"text-center"},[t._v(t._s(n+1))])]),a("v-col",{staticClass:"pa-0",attrs:{cols:"12",sm:"10"}},[a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-format-quote-close"},model:{value:e.parts[0].text,callback:function(a){t.$set(e.parts[0],"text",a)},expression:"trainingPhrase.parts[0].text"}})],1),a("v-col",{attrs:{cols:"12",sm:"1"}},[a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.deleteTrainingPhrase(n)}}},[a("v-icon",[t._v("mdi-delete")])],1)],1)],1)})],2),a("div",{staticClass:"title"},[t._v("Respuestas")]),a("draggable",{attrs:{handle:".my-handle",animation:300},on:{change:t.rerenderComponents},model:{value:t.intent.messages,callback:function(e){t.$set(t.intent,"messages",e)},expression:"intent.messages"}},[a("transition-group",t._l(t.intent.messages,function(e,n){return a("v-card",{key:"mensaje"+n},[e.hasOwnProperty("text")?a("div",[a("v-card-title",{staticClass:"primary my-handle",on:{click:function(t){}}},[a("v-icon",{staticClass:"mr-4",attrs:{dark:""}},[t._v("mdi-magnify")]),a("h2",{staticClass:"white--text title"},[t._v("Mensaje Múltiple")]),a("v-spacer"),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteMessage(n)}}},[t._v("Eliminar")])],1),a("v-container",[t._l(e.text.text,function(s,o){return a("v-row",{key:"multiple"+o,attrs:{align:"center"}},[a("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"1"}},[t._v(t._s(o+1))]),a("v-col",{attrs:{cols:"12",sm:"11"}},[a("v-textarea",{attrs:{"append-outer-icon":"mdi-delete",rows:"1","auto-grow":""},on:{"click:append-outer":function(e){return t.deleteFallbackResponse(n,o)}},model:{value:e.text.text[o],callback:function(a){t.$set(e.text.text,o,a)},expression:"multipleMessage.text.text[messageIndex]"}})],1)],1)}),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"11"}},[a("v-textarea",{attrs:{placeholder:"Ingresa una variante a la respuesta",rows:"1","auto-grow":""},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.addResponseVariant(e.text.text,t.responseVariant)}},model:{value:t.responseVariant,callback:function(e){t.responseVariant=e},expression:"responseVariant"}})],1)],1)],2)],1):t._e(),e.hasOwnProperty("payload")?a("div",[a("v-card-title",{staticClass:"primary my-handle",on:{click:function(t){}}},[a("v-icon",{staticClass:"mr-4",attrs:{dark:""}},[t._v("mdi-magnify")]),a("h2",{staticClass:"white--text title"},[t._v("Rich Message")]),a("v-spacer"),a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteMessage(n)}}},[t._v("Eliminar")])],1),a("v-container",[t.rerender?t._e():a(t.dynamicComponent(t.typeRichMessage(n)),{tag:"component",attrs:{index:n,data:t.structProtoToJson(e.payload)},on:{onSaveGeneric:t.saveGeneric,onSaveButton:t.saveButton,onSaveQuickReply:t.saveQuickReply}})],1)],1):t._e()])}),1)],1),a("v-btn",{attrs:{text:"",color:"error",to:{name:"dashboard"}}},[t._v("Atras")]),a("v-btn",{staticClass:"ml-3",attrs:{color:"success"},on:{click:function(e){return t.saveIntent(t.intent)}}},[t._v("Guardar")]),a("v-menu",{attrs:{"open-on-hover":"",top:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"ml-3",attrs:{color:"primary"}},n),[t._v("Añadir respuesta")])]}}],null,!1,443868537)},[a("v-list",[a("v-list-item",{on:{click:function(e){return t.insertElement("simpleMessage")}}},[a("v-list-item-title",[t._v("Mensaje Simple")])],1),a("v-list-item",{on:{click:function(e){return t.insertElement("button")}}},[a("v-list-item-title",[t._v("Botón")])],1),a("v-list-item",{on:{click:function(e){return t.insertElement("generic")}}},[a("v-list-item-title",[t._v("Menú Carrusel")])],1),a("v-list-item",{on:{click:function(e){return t.insertElement("quickReply")}}},[a("v-list-item-title",[t._v("Quick replies")])],1)],1)],1)],1):t._e()},o=[],i=(a("7f7f"),a("6762"),a("2fdb"),a("7514"),a("ac6a"),a("5df3"),a("4f7f"),a("bd86")),r=a("7618");function l(t){var e={};for(var a in t)e[a]=d(t[a]);return{fields:e}}var c=(n={},Object(i["a"])(n,Object(r["a"])(0),"numberValue"),Object(i["a"])(n,Object(r["a"])(""),"stringValue"),Object(i["a"])(n,Object(r["a"])(!1),"boolValue"),n),u=new Set(["numberValue","stringValue","boolValue"]);function d(t){var e={};if(null===t)e.kind="nullValue",e.nullValue="NULL_VALUE";else if(t instanceof Array)e.kind="listValue",e.listValue={values:t.map(d)};else if("object"===Object(r["a"])(t))e.kind="structValue",e.structValue=l(t);else if(Object(r["a"])(t)in c){var a=c[Object(r["a"])(t)];e.kind=a,e[a]=t}else console.warn("Unsupported value type ",Object(r["a"])(t));return e}function m(t){if(!t||!t.fields)return{};var e={};for(var a in t.fields)e[a]=p(t.fields[a]);return e}function p(t){return t&&t.kind?u.has(t.kind)?t[t.kind]:"nullValue"===t.kind?null:"listValue"===t.kind?(t.listValue&&t.listValue.values||console.warn("Invalid JSON list value proto: ",JSON.stringify(t)),t.listValue.values.map(p)):"structValue"===t.kind?m(t.structValue):(console.warn("Unsupported JSON value proto kind: ",t.kind),null):null}var v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("strong",[t._v("Rich message de tipo: generic")]),a("br"),a("v-dialog",{attrs:{width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},Object.assign({},s,n)),[t._v("Editar")])]}}],null,!0)},[a("span",[t._v("Editar pantallas")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Mensaje tipo generic")])],1),a("v-container",[a("v-tabs",[t._l(t.elements,function(e,n){return a("v-tab",{key:n},[a("v-icon",{attrs:{left:""}},[t._v("mdi-access-point")]),t._v("\n            "+t._s(n+1)+". "+t._s(e.title)+"\n          ")],1)}),t._l(t.elements,function(e,n){return a("v-tab-item",{key:"pantallas"+n},[a("v-card",{attrs:{flat:""}},[a("v-container",[a("v-row",[a("v-text-field",{staticClass:"mx-3",attrs:{clearable:"",label:"Título"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"element.title"}}),a("v-text-field",{staticClass:"mx-3",attrs:{clearable:"",label:"Descripción"},model:{value:e.subtitle,callback:function(a){t.$set(e,"subtitle",a)},expression:"element.subtitle"}})],1),a("v-text-field",{attrs:{clearable:"",label:"URL de la imagen"},model:{value:e.image_url,callback:function(a){t.$set(e,"image_url",a)},expression:"element.image_url"}}),a("div",{staticClass:"headline"},[t._v("Botones")]),t._l(e.buttons,function(s,o){return a("v-row",{key:o,staticClass:"ml-4"},[a("span",{staticClass:"title"},[t._v("Botón "+t._s(o+1))]),a("v-btn",{staticClass:"ml-3",attrs:{small:"",color:"error"},on:{click:function(a){return t.deleteButtonScreen(e.buttons,o)}}},[t._v("Eliminar")]),a("v-col",{staticClass:"ma-0",attrs:{cols:"12",sm:"12"}},[a("v-row",[a("p",{staticClass:"subtitle-1"},[t._v("Tipo:")]),a("v-radio-group",{staticClass:"ma-0 ml-5",attrs:{row:""},on:{change:function(a){return t.changeButtonType(e.buttons,n,o,s.type)}},model:{value:s.type,callback:function(e){t.$set(s,"type",e)},expression:"button.type"}},[a("v-radio",{attrs:{label:"POSTBACK",value:"postback"}}),a("v-radio",{attrs:{label:"ENLACE WEB",value:"web_url"}})],1)],1)],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{clearable:"",label:"texto del botón"},model:{value:s.title,callback:function(e){t.$set(s,"title",e)},expression:"button.title"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},["postback"==s.type?a("v-text-field",{attrs:{clearable:"",label:"Mensaje de emparejamiento"},model:{value:s.payload,callback:function(e){t.$set(s,"payload",e)},expression:"button.payload"}}):t._e(),"web_url"==s.type?a("v-text-field",{attrs:{clearable:"",label:"Url"},model:{value:s.url,callback:function(e){t.$set(s,"url",e)},expression:"button.url"}}):t._e()],1)],1)}),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{sm:"4"}},[a("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message")]),e.image_url?a("v-img",{attrs:{src:e.image_url,"aspect-ratio":"1.7",contain:""}}):t._e(),a("strong",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.subtitle))]),t._l(e.buttons,function(e){return a("v-btn",{key:e.id,staticClass:"wrapText",attrs:{block:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)],1)],2)],1)],1)})],2)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:function(e){t.dialog=!1,t.saveGeneric()}}},[t._v("Guardar")])],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[t._l(t.elements,function(e,n){return a("v-col",{key:e.id,attrs:{sm:"3"}},[a("v-btn",{attrs:{small:"",color:"error"},on:{click:function(e){return t.deleteGenericScreen(n)}}},[t._v("Eliminar")]),a("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message")]),e.image_url?a("v-img",{attrs:{src:e.image_url,"aspect-ratio":"1.7",contain:""}}):t._e(),a("strong",[t._v(t._s(e.title))]),a("p",[t._v(t._s(e.subtitle))]),t._l(e.buttons,function(e){return a("v-btn",{key:e.id,staticClass:"wrapText",attrs:{block:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)}),a("v-btn",{attrs:{color:"primary"},on:{click:t.addGenericScreen}},[t._v("Añadir otra pantalla")])],2)],1)},f=[],h={props:["data","index"],name:"generic",data:function(){return{dialog:!1,elements:this.data.facebook.attachment.payload.elements}},methods:{deleteButtonScreen:function(t,e){t.splice(e,1)},deleteGenericScreen:function(t){this.elements.splice(t,1)},changeButtonType:function(t,e,a,n){"postback"==n&&t.splice(a,1,{payload:"",type:"postback",title:t[a].title}),"web_url"==n&&t.splice(a,1,{type:"web_url",url:"",title:t[a].title})},saveGeneric:function(){var t=this.data;t.facebook.attachment.payload.elements=this.elements,this.$emit("onSaveGeneric",t,this.index)},addGenericScreen:function(){this.elements.push({title:"Créditos",buttons:[{payload:"boton 01",type:"postback",title:"boton 01"},{type:"postback",title:"boton 02",payload:"boton 02"},{title:"boton 03",payload:"boton 03",type:"postback"}],subtitle:"Contamos con las siguientes opciones",image_url:"http://4.bp.blogspot.com/-_QCxfa0Jjv4/U1h7FRoJnAI/AAAAAAAAAYg/lbU-uWs5T-M/s1600/cpa-school-test.png"}),this.saveGeneric()}}},b=h,g=(a("4b34"),a("2877")),_=a("6544"),y=a.n(_),x=a("8336"),k=a("b0af"),w=a("99d9"),I=a("62ad"),V=a("a523"),C=a("169a"),T=a("ce7e"),S=a("132d"),$=a("adda"),R=a("67b6"),A=a("43a6"),O=a("0fd9"),j=a("2fa4"),P=a("71a3"),E=a("c671"),M=a("fe57"),N=a("8654"),B=a("71d9"),D=a("2a7f"),F=a("3a2f"),q=Object(g["a"])(b,v,f,!1,null,"4e1e94be",null),L=q.exports;y()(q,{VBtn:x["a"],VCard:k["a"],VCardActions:w["a"],VCol:I["a"],VContainer:V["a"],VDialog:C["a"],VDivider:T["a"],VIcon:S["a"],VImg:$["a"],VRadio:R["a"],VRadioGroup:A["a"],VRow:O["a"],VSpacer:j["a"],VTab:P["a"],VTabItem:E["a"],VTabs:M["a"],VTextField:N["a"],VToolbar:B["a"],VToolbarTitle:D["a"],VTooltip:F["a"]});var U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("strong",[t._v("Rich message de tipo: quick reply")]),a("br"),a("v-dialog",{attrs:{width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},Object.assign({},s,n)),[t._v("Editar")])]}}],null,!0)},[a("span",[t._v("Editar quick reply")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Mensaje tipo Quick Reply")])],1),a("v-container",{staticClass:"pa-5"},[a("p",[t._v("Mensaje que acompaña al quick reply (obligatorio)")]),a("v-text-field",{attrs:{outlined:""},model:{value:t.quickReplies.text,callback:function(e){t.$set(t.quickReplies,"text",e)},expression:"quickReplies.text"}}),t._l(t.quickReplies.quick_replies,function(e,n){return a("v-row",{key:n},[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{label:"Texto del quick reply "+(n+1)},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"quickReply.title"}}),a("v-text-field",{attrs:{label:"Mensaje de emparejamiento (para DialogFlow) "},model:{value:e.payload,callback:function(a){t.$set(e,"payload",a)},expression:"quickReply.payload"}}),a("v-text-field",{attrs:{label:"URL de la imagen"},model:{value:e.image_url,callback:function(a){t.$set(e,"image_url",a)},expression:"quickReply.image_url"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("strong",[t._v("Vista previa")]),a("br"),a("v-btn",{attrs:{outlined:"",text:"",color:"primary"}},[t._v(t._s(e.title))])],1),a("v-btn",{attrs:{small:"",color:"error"}},[t._v("Eliminar")])],1),a("div",{staticClass:"bottonLine"})],1)})],2),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.addQuickReply}},[t._v("Agregar quick reply (max 15)")]),a("v-btn",{attrs:{color:"success"},on:{click:function(e){t.dialog=!1,t.saveQuickReply()}}},[t._v("Guardar")])],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{sm:"6"}},[a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message:")]),a("v-divider"),a("p",[t._v(t._s(t.quickReplies.text))]),t._l(t.quickReplies.quick_replies,function(e,n){return a("v-btn",{key:n,attrs:{text:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)],1)],1)},G=[],J={props:["data","index"],data:function(){return{dialog:!1,quickReplies:this.data.facebook}},methods:{addQuickReply:function(){this.quickReplies.quick_replies.push({image_url:"",content_type:"text",title:"ejemplo",payload:"ejemplo_payload"})},saveQuickReply:function(){var t=this.data;t.facebook=this.quickReplies,this.$emit("onSaveQuickReply",t,this.index)}}},z=J,Q=(a("9d20"),Object(g["a"])(z,U,G,!1,null,"590c644c",null)),W=Q.exports;y()(Q,{VBtn:x["a"],VCard:k["a"],VCardActions:w["a"],VCol:I["a"],VContainer:V["a"],VDialog:C["a"],VDivider:T["a"],VRow:O["a"],VSpacer:j["a"],VTextField:N["a"],VToolbar:B["a"],VToolbarTitle:D["a"],VTooltip:F["a"]});var X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("strong",[t._v("Rich message de tipo: button")]),a("br"),a("v-dialog",{attrs:{width:"800"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({attrs:{color:"primary",dark:""}},Object.assign({},s,n)),[t._v("Editar")])]}}],null,!0)},[a("span",[t._v("editar")])])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-toolbar-title",[t._v("Editar mensaje de tipo botón")])],1),a("v-container",[a("v-text-field",{attrs:{label:"Mensaje que acompaña al botón (Obligatorio)"},model:{value:t.buttons.text,callback:function(e){t.$set(t.buttons,"text",e)},expression:"buttons.text"}}),a("v-row",{attrs:{align:"center"}},[a("v-col",{attrs:{cols:"12",sm:"6"}},t._l(t.buttons.buttons,function(e,n){return a("v-col",{key:n,attrs:{cols:"12"}},[a("v-text-field",{attrs:{clearable:"",outlined:"",label:"Texto del botón "+(n+1)},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"button.title"}}),a("v-text-field",{attrs:{clearable:"",outlined:"",label:"URL del botón "+(n+1)},model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"button.url"}})],1)}),1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message")]),a("p",[t._v(t._s(t.buttons.text))]),t._l(t.buttons.buttons,function(e,n){return a("v-btn",{key:n,attrs:{block:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.addButton}},[t._v("Añadir otro botón (MAX 3)")]),a("v-btn",{staticClass:"ml-3",attrs:{color:"success"},on:{click:function(e){t.dialog=!1,t.saveButton()}}},[t._v("Guardar")])],1)],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{sm:"4"}},[a("v-card",{staticClass:"pa-5",attrs:{outlined:""}},[a("strong",[t._v("Vista previa del rich message")]),a("p",[t._v(t._s(t.buttons.text))]),t._l(t.buttons.buttons,function(e,n){return a("v-btn",{key:n,attrs:{block:"",outlined:"",color:"primary"}},[t._v(t._s(e.title))])})],2)],1)],1)],1)},H=[],K={props:["data","index"],data:function(){return{dialog:!1,buttons:this.data.facebook.attachment.payload}},methods:{addButton:function(){this.buttons.buttons.push({type:"web_url",url:"https://developers.facebook.com/docs/messenger-platform/send-messages/template/list",title:"Ejemplo"})},saveButton:function(){var t=this.data;t.facebook.attachment.payload=this.buttons,this.$emit("onSaveButton",t,this.index)}}},Y=K,Z=Object(g["a"])(Y,X,H,!1,null,"2ec5851e",null),tt=Z.exports;function et(){return{platform:"PLATFORM_UNSPECIFIED",text:{text:["Nuevo mensaje"]},message:"text"}}y()(Z,{VBtn:x["a"],VCard:k["a"],VCardActions:w["a"],VCol:I["a"],VContainer:V["a"],VDialog:C["a"],VDivider:T["a"],VRow:O["a"],VSpacer:j["a"],VTextField:N["a"],VToolbar:B["a"],VToolbarTitle:D["a"],VTooltip:F["a"]});var at=function(){return{platform:"PLATFORM_UNSPECIFIED",payload:l({facebook:{attachment:{payload:{template_type:"generic",elements:[{title:"Créditos",buttons:[{payload:"boton 01",type:"postback",title:"boton 01"},{type:"postback",title:"boton 02",payload:"boton 02"},{title:"boton 03",payload:"boton 03",type:"postback"}],subtitle:"Contamos con las siguientes opciones",image_url:"http://4.bp.blogspot.com/-_QCxfa0Jjv4/U1h7FRoJnAI/AAAAAAAAAYg/lbU-uWs5T-M/s1600/cpa-school-test.png"}]},type:"template"}}}),message:"payload"}},nt=function(){return{platform:"PLATFORM_UNSPECIFIED",payload:l({facebook:{text:"Ejemplo",quick_replies:[{content_type:"text",title:"iniciar sesion",payload:"login_payload",image_url:""},{content_type:"text",title:"registro",payload:"registro_payload",image_url:""}]}}),message:"payload"}},st=function(){return{platform:"PLATFORM_UNSPECIFIED",payload:l({facebook:{attachment:{payload:{buttons:[{url:"https://developers.facebook.com/docs/messenger-platform/send-messages/template/list",title:"boton ejemplo",type:"web_url"}],template_type:"button",text:"Es obligatorio un mensaje junto al boton ⬇"},type:"template"}}}),message:"payload"}},ot=a("310e"),it=a.n(ot),rt={components:{draggable:it.a},data:function(){return{responseVariant:"",rerender:!1,intent:null,newTrainingPhrase:"",components:[L,W,tt]}},mounted:function(){this.initialData()},methods:{addResponseVariant:function(t,e){t.push(e),this.responseVariant=""},rerenderComponents:function(){var t=this;console.log("renderizar de nuevo"),this.rerender=!0,setTimeout(function(){t.rerender=!1},200)},deleteMessage:function(t){this.intent.messages.splice(t,1)},dynamicComponent:function(t){switch(t){case"button":return this.components[2];case"generic":return this.components[0];case"quickReply":return this.components[1];default:break}},typeRichMessage:function(t){return this.structProtoToJson(this.intent.messages[t].payload).facebook.attachment?this.structProtoToJson(this.intent.messages[t].payload).facebook.attachment.payload.template_type:"quickReply"},jsonToStructProto:function(t){return l(t)},structProtoToJson:function(t){return m(t)},deleteFallbackResponse:function(t,e){this.intent.messages[t].text.text.splice(e,1)},initialData:function(){var t=this;this.intent=this.$store.state.intents.find(function(e){return e.name.includes(t.intentId)})},saveIntent:function(t){var e=this;this.$store.dispatch("showOverlay",{active:!0,text:"Actualizando"}),axios.put("/api/chatbot/agent/intents/update",{newIntent:t}).then(function(t){console.log(t),t.data.ok&&(e.$store.dispatch("showOverlay",{active:!1,text:""}),e.$store.dispatch("showSnackbar",{text:t.data.message,color:"success"}))}).catch(function(t){console.error(t)}).finally(function(){e.$store.dispatch("showOverlay",{active:!1,text:"Actualizando"})})},addTrainingPhrase:function(t){this.intent.trainingPhrases.push({parts:[{text:t,entityType:"",alias:"",userDefined:!1}],name:"be6f229c-44c2-496f-929d-7f79c7395b9d",type:"EXAMPLE",timesAddedCount:0})},deleteTrainingPhrase:function(t){this.intent.trainingPhrases.splice(t,1)},saveGeneric:function(t,e){console.log("se actualizara el generic que cuenta con es: ",this.structProtoToJson(this.intent.messages[e].payload)),console.log("a esto: ",t),this.intent.messages[e].payload=this.jsonToStructProto(t)},saveButton:function(t,e){this.intent.messages[e].payload=this.jsonToStructProto(t)},saveQuickReply:function(t,e){console.log("actualmente hay esto: ",this.intent.messages[e].payload),console.log("se guardara esto: ",this.jsonToStructProto(t),e),this.intent.messages[e].payload=this.jsonToStructProto(t)},insertElement:function(t){switch(t){case"simpleMessage":this.intent.messages.push(et());break;case"button":this.intent.messages.push(st());break;case"generic":this.intent.messages.push(at());break;case"quickReply":console.log("se agregara el intent: ",nt()),this.intent.messages.push(nt());break;default:break}}},computed:{intentId:function(){return this.$route.params.id},trainingPhrases:function(){return this.intent.trainingPhrases}}},lt=rt,ct=a("8860"),ut=a("da13"),dt=a("5d23"),mt=a("e449"),pt=a("a844"),vt=Object(g["a"])(lt,s,o,!1,null,"225828a1",null);e["default"]=vt.exports;y()(vt,{VBtn:x["a"],VCard:k["a"],VCardTitle:w["c"],VCol:I["a"],VContainer:V["a"],VIcon:S["a"],VList:ct["a"],VListItem:ut["a"],VListItemTitle:dt["b"],VMenu:mt["a"],VRow:O["a"],VSpacer:j["a"],VTextField:N["a"],VTextarea:pt["a"]})},f5ea:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",[t._v("Listado de usuarios del sistema")]),a("v-data-table",{staticClass:"elevation-1",attrs:{loading:0==t.users.length,"loading-text":"Cargando usuarios","hide-default-footer":"",headers:t.headers,items:t.users},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("div",{staticClass:"flex-grow-1"}),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[t._v("Crear usuario")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombres"},model:{value:t.editedItem.first_name,callback:function(e){t.$set(t.editedItem,"first_name",e)},expression:"editedItem.first_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Apellidos"},model:{value:t.editedItem.last_name,callback:function(e){t.$set(t.editedItem,"last_name",e)},expression:"editedItem.last_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Correo"},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.roles,"item-text":"name","item-value":"value",label:"Rol"},model:{value:t.selectedRole,callback:function(e){t.selectedRole=e},expression:"selectedRole"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.status,"item-text":"name","item-value":"value",label:"Estado"},model:{value:t.selectedStatus,callback:function(e){t.selectedStatus=e},expression:"selectedStatus"}})],1),-1==t.editedIndex?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{type:"password",label:"Contraseña"},model:{value:t.editedItem.password,callback:function(e){t.$set(t.editedItem,"password",e)},expression:"editedItem.password"}})],1):a("v-col",{attrs:{cols:"12",sm:"12"}},[a("v-btn",{attrs:{color:"error",block:""},on:{click:function(e){e.stopPropagation(),t.dialog2=!0}}},[t._v("Nueva Contraseña")])],1)],1)],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"error",text:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"success"},on:{click:t.save}},[t._v("Guardar")])],1)],1)],1)],1)]},proxy:!0},{key:"item.status",fn:function(e){var n=e.item;return[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:1==n.status,expression:"item.status==1"}],attrs:{color:"success"}},[t._v("Activo")]),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:0==n.status,expression:"item.status==0"}],attrs:{color:"error"}},[t._v("No Activo")])]}},{key:"item.action",fn:function(e){var n=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{color:"primary",small:""},on:{click:function(e){return t.editItem(n)}}},[t._v("edit")]),a("v-icon",{attrs:{color:"error",small:""},on:{click:function(e){return t.deleteItem(n)}}},[t._v("delete")])]}}])}),a("v-dialog",{attrs:{width:"400"},model:{value:t.dialog2,callback:function(e){t.dialog2=e},expression:"dialog2"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("Confirma tu contraseña de SUPERADMINISTRADOR")]),a("v-container",[a("v-text-field",{attrs:{type:"password"},model:{value:t.superAdminPassword,callback:function(e){t.superAdminPassword=e},expression:"superAdminPassword"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{loading:t.loadingButton,color:"primary"},on:{click:function(e){return t.verifySuperAdminPassword(t.superAdminPassword)}}},[t._v("Confirmar")])],1)],1)],1),a("v-dialog",{attrs:{width:"400"},model:{value:t.dialog3,callback:function(e){t.dialog3=e},expression:"dialog3"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("Nueva contraseña")]),a("v-container",[a("v-text-field",{attrs:{type:"password"},model:{value:t.newUserPassword,callback:function(e){t.newUserPassword=e},expression:"newUserPassword"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"success"},on:{click:function(e){return t.updatePassword(t.editedItem.email,t.newUserPassword)}}},[t._v("Guardar")])],1)],1)],1)],1)},s=[],o={data:function(){return{roles:[{id:1,name:"ADMIN",value:1},{id:2,name:"SUPERADMIN",value:2}],selectedRole:1,status:[{id:1,name:"ACTIVO",value:1},{id:2,name:"NO ACTIVO",value:0}],selectedStatus:1,newUserPassword:"",superAdminPassword:"",dialog3:!1,dialog2:!1,dialog:!1,headers:[{text:"Nombres",align:"left",sortable:!1,value:"first_name"},{text:"Apellidos",value:"last_name"},{text:"Correo",value:"email"},{text:"Rol",value:"role"},{text:"Estado",value:"status"},{text:"Acciones",value:"action",sortable:!1}],users:[],editedIndex:-1,editedItem:{first_name:"",last_name:"",email:"",role:"",status:"",password:""},defaultItem:{first_name:"",last_name:"",email:"",role:"",status:"",password:""},loadingButton:!1}},beforeMount:function(){this.getInitialData()},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo usuario":"Editar usuario"}},methods:{verifySuperAdminPassword:function(t){var e=this;this.loadingButton=!0,axios.post("/api/users/confirm-password",{email:this.$store.state.user.email,password:t}).then(function(t){console.log(t),t.data.ok&&(e.dialog2=!1,e.dialog3=!0)}).catch(function(t){console.error(t),e.$store.dispatch("showSnackbar",{text:t.response.data.err.message,color:"error"})}).finally(function(){e.loadingButton=!1})},updatePassword:function(t,e){var a=this;axios.post("/api/user/update-password",{email:t,newPassword:e}).then(function(t){console.log(t.data),t.data.ok&&(a.$store.dispatch("showSnackbar",{text:t.data.message,color:"success"}),a.dialog3=!1,a.newUserPassword="",a.superAdminPassword="")}).catch(function(t){console.error(t),a.$store.dispatch("showSnackbar",{text:t.response.data.err.message,color:"error"})})},getInitialData:function(){var t=this;axios.get("/api/auth-users/list").then(function(e){console.log(e.data),t.users=e.data.payload}).catch(function(t){console.error(t)})},editItem:function(t){console.log("llego este item: ",t),this.editedIndex=this.users.indexOf(t),this.editedItem=Object.assign({},t),this.selectedRole=parseInt(t.role),this.selectedStatus=parseInt(t.status),this.dialog=!0},deleteItem:function(t){var e=this,a=this.users.indexOf(t);console.log("se eliminara el usuario: ",t),confirm("¿Seguro que deseas eliminar este usuario?")&&axios.post("/api/auth-users/delete",{email:t.email}).then(function(t){t.data.ok&&(e.$store.dispatch("showSnackbar",{text:t.data.message,color:"success"}),e.users[a].status=0)}).catch(function(t){console.error(t)})},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1},300)},save:function(){var t=this;this.editedIndex>-1?axios.put("/api/auth-users/update",{first_name:this.editedItem.first_name,last_name:this.editedItem.last_name,email:this.editedItem.email,role:this.selectedRole,status:this.selectedStatus}).then(function(e){e.data.ok&&(t.$store.dispatch("showSnackbar",{text:e.data.message,color:"success"}),Object.assign(t.users[t.editedIndex],t.editedItem),t.users[t.editedIndex].status=t.selectedStatus,t.users[t.editedIndex].role=t.selectedRole,t.close())}).catch(function(t){console.error(t)}):axios.post("/api/register",{first_name:this.editedItem.first_name,last_name:this.editedItem.last_name,email:this.editedItem.email,password:this.editedItem.password,role:this.selectedRole,status:this.selectedStatus}).then(function(e){e.data.ok&&(t.$store.dispatch("showSnackbar",{text:e.data.message,color:"success"}),t.users.push(t.editedItem),t.close())}).catch(function(t){console.error(t)})}}},i=o,r=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),m=a("99d9"),p=a("cc20"),v=a("62ad"),f=a("a523"),h=a("8fea"),b=a("169a"),g=a("132d"),_=a("0fd9"),y=a("b974"),x=a("2fa4"),k=a("8654"),w=a("71d9"),I=Object(r["a"])(i,n,s,!1,null,"5820e238",null);e["default"]=I.exports;c()(I,{VBtn:u["a"],VCard:d["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VChip:p["a"],VCol:v["a"],VContainer:f["a"],VDataTable:h["a"],VDialog:b["a"],VIcon:g["a"],VRow:_["a"],VSelect:y["a"],VSpacer:x["a"],VTextField:k["a"],VToolbar:w["a"]})},ff18:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("pagina de error")])},s=[],o={},i=o,r=a("2877"),l=Object(r["a"])(i,n,s,!1,null,"6be65d42",null);e["default"]=l.exports},fff1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h1",[t._v("Listado de agencias")]),a("v-data-table",{staticClass:"elevation-1",attrs:{search:t.search,headers:t.headers,items:t.agencies,"items-per-page":10,loading:0==t.agencies.length,"loading-text":"Cargando agencias"},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("div",{staticClass:"flex-grow-1"}),a("v-dialog",{attrs:{persistent:"","max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("v-btn",t._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[t._v("Nueva agencia")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.editedItem.agency_name,callback:function(e){t.$set(t.editedItem,"agency_name",e)},expression:"editedItem.agency_name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.regions,"item-text":"name","item-value":"id",label:"Región"},model:{value:t.editedItem.region,callback:function(e){t.$set(t.editedItem,"region",e)},expression:"editedItem.region"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Dirección"},model:{value:t.editedItem.address,callback:function(e){t.$set(t.editedItem,"address",e)},expression:"editedItem.address"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Referencia"},model:{value:t.editedItem.reference,callback:function(e){t.$set(t.editedItem,"reference",e)},expression:"editedItem.reference"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Horarios"},model:{value:t.editedItem.schedule,callback:function(e){t.$set(t.editedItem,"schedule",e)},expression:"editedItem.schedule"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",{attrs:{placeholder:"Ingresa sinónimo (enter)"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addSynonym(t.newSynonym)}},model:{value:t.newSynonym,callback:function(e){t.newSynonym=e},expression:"newSynonym"}})],1),a("v-col",{attrs:{cols:"12",sm:"6"}},t._l(t.editedItem.synonyms,function(e){return a("v-chip",{attrs:{color:"primary"}},[t._v(t._s(e))])}),1)],1)],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"error",text:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"success"},on:{click:t.save}},[t._v("Guardar")])],1)],1)],1)],1)]},proxy:!0},{key:"item.estado_politicas_privacidad",fn:function(e){var n=e.item;return[n.estado_politicas_privacidad?a("v-chip",{attrs:{color:"success"}},[t._v("Aceptó")]):a("v-chip",{attrs:{color:"error"}},[t._v("No aceptó")])]}},{key:"item.hoja_informativa",fn:function(e){var n=e.item;return[n.hoja_informativa?t._e():a("p",[t._v("Por definir")])]}},{key:"item.action",fn:function(e){var n=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{color:"primary",small:""},on:{click:function(e){return t.editItem(n)}}},[t._v("edit")]),a("v-icon",{attrs:{color:"error",small:""},on:{click:function(e){return t.deleteItem(n)}}},[t._v("delete")])]}}])})],1)},s=[],o=(a("28a5"),a("6762"),a("2fdb"),{data:function(){return{newSynonym:"",regions:[],search:"",dialog:!1,headers:[{text:"Nombre",align:"left",value:"agency_name"},{text:"Región",value:"name"},{text:"Dirección",value:"address"},{text:"Referencia",value:"reference"},{text:"horario",value:"schedule"},{text:"Acciones",value:"action",sortable:!1}],agencies:[],editedIndex:-1,editedItem:{agency_id:0,address:"",agency_name:"",reference:"",region:"",schedule:"",synonyms:[]},defaultItem:{agency_id:0,address:"",agency_name:"",reference:"",region:"",schedule:"",synonyms:[]}}},beforeMount:function(){this.getInitialData()},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva agencia":"Editar agencia"}},methods:{addSynonym:function(t){this.editedItem.synonyms.push(t),this.newSynonym=""},getInitialData:function(){var t=this;axios.get("/api/chatbot/agent/agencies/list").then(function(e){e.data.ok&&(console.log(e.data.payload),t.agencies=e.data.payload,t.getRegions())}).catch(function(t){console.error(t)})},getRegions:function(){var t=this;axios.get("/api/regions/list").then(function(e){console.log(e.data),t.regions=e.data.payload}).catch(function(t){console.error(t)})},editItem:function(t){this.editedIndex=this.agencies.indexOf(t),this.editedItem=Object.assign({},t),""==this.editedItem.synonyms?this.editedItem.synonyms=[]:this.editedItem.synonyms.includes(",")?this.editedItem.synonyms=this.editedItem.synonyms.split(","):this.editedItem.synonyms=[this.editedItem.synonyms],this.dialog=!0},deleteItem:function(t){var e=this,a=this.agencies.indexOf(t);confirm("¿Seguro que deseas eliminar esta agencia?")&&axios.post("/api/chatbot/agent/agencies/delete",{id:t.agency_id}).then(function(t){t.data.ok&&(e.$store.dispatch("showSnackbar",{text:t.data.message,color:"success"}),e.agencies.splice(a,1))}).catch(function(t){console.error(t)})},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1},300)},save:function(){var t=this;this.editedIndex>-1?(""!=this.editedItem.synonyms&&(this.editedItem.synonyms=this.editedItem.synonyms),axios.put("/api/agencies/update",{id:this.editedItem.agency_id,address:this.editedItem.address,agency_name:this.editedItem.agency_name,reference:this.editedItem.reference,region:this.editedItem.region,schedule:this.editedItem.schedule,synonyms:this.editedItem.synonyms}).then(function(e){e.data.ok&&(t.$store.dispatch("showSnackbar",{text:e.data.message,color:"success"}),t.close(),Object.assign(t.agencies[t.editedIndex],t.editedItem))}).catch(function(t){console.error(t)})):axios.post("/api/agencies/create",{newAgency:{address:this.editedItem.address,agency_name:this.editedItem.agency_name,reference:this.editedItem.reference,region:this.editedItem.region,schedule:this.editedItem.schedule,status:1,synonyms:this.editedItem.synonyms.join(",")}}).then(function(e){e.data.ok&&(t.$store.dispatch("showSnackbar",{text:e.data.message,color:"success"}),t.close(),t.agencies.push(t.editedItem))}).catch(function(t){console.error(t)})}}}),i=o,r=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("b0af"),m=a("99d9"),p=a("cc20"),v=a("62ad"),f=a("a523"),h=a("8fea"),b=a("169a"),g=a("132d"),_=a("0fd9"),y=a("b974"),x=a("8654"),k=a("71d9"),w=Object(r["a"])(i,n,s,!1,null,"8c50af58",null);e["default"]=w.exports;c()(w,{VBtn:u["a"],VCard:d["a"],VCardActions:m["a"],VCardText:m["b"],VCardTitle:m["c"],VChip:p["a"],VCol:v["a"],VContainer:f["a"],VDataTable:h["a"],VDialog:b["a"],VIcon:g["a"],VRow:_["a"],VSelect:y["a"],VTextField:x["a"],VToolbar:k["a"]})}});
//# sourceMappingURL=app.3640191d.js.map